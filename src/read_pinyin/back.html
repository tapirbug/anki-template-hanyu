{{FrontSide}}

<hr id=answer>

<dl class="translations">
  <dt>
    汉字
  </dt>
  <dd>
    {{汉字}}
  </dd>
  <dt>
    汉语
  </dt>
  <dd id="t2s-player-container" class="t2s-player-container">
    <div class="anki-web-player" id="anki-web-player"></div>
    <tts class="anki-droid-player" service="android" voice="zh_CN">
      {{text:汉字}}
    </tts>
    <div class="anki-builtin-player">
      {{tts zh_CN:汉字}}
    </div>
  </dd>
  <dt>
    Deutsch
  </dt>
  <dd>
    {{Deutsch}}
  </dd>
</dl>

<script type="module">
  import { createTts } from '../tts/tts'
  createTts({
    addTo: 'anki-web-player',
    text: '{{text:汉字}}',
    lang: ["cmn", "zh-cn", "zh_cn", "zh"]
  })
</script>

<script type="module">
  if (process.env.NODE_ENV !== 'production') {
    const pattern = "{{FrontSide}}"
    import('bundle-text:./front.html')
      .then(html => {
        for (child of document.body.childNodes) {
          const text = child.textContent
          const patternIdx = text.indexOf(pattern)
          if (patternIdx >= 0) {
            // resolve first {{FrontSide}} (just for dev), which also includes the CSS/KS
            const front = document.createElement('div')
            front.innerHTML = html
            const beforeDirective = document.createTextNode(text.substring(0, patternIdx))
            const afterDirective = document.createTextNode(text.substring(patternIdx + pattern.length))
            child.replaceWith(beforeDirective, front, afterDirective)
            return // stop after first
          }
        }
      })
  }
</script>